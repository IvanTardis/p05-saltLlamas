<!-- templates/play.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oregon Trail Game</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body class="bg-black text-light">
  <div class="container my-5">

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="card mb-4 bg-dark text-light">
      <div class="card-body">
        <h5 class="card-title">Current Game State</h5>
        <ul class="list-group list-group-flush">
          <li class="list-group-item bg-dark text-light">
            <strong>Distance Traveled:</strong> {{ game_state.distance }} miles
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Days on Trail:</strong> {{ game_state.days_on_trail }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Survivors:</strong> {{ game_state.survivors }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Food (dollars):</strong> {{ game_state.food }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Money:</strong> ${{ game_state.money }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Oxen Spent:</strong> ${{ game_state.oxen_spent }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Bullets:</strong> {{ game_state.bullets }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Clothing (dollars):</strong> {{ game_state.clothing }}
          </li>
          <li class="list-group-item bg-dark text-light">
            <strong>Misc Supplies (dollars):</strong> {{ game_state.misc }}
          </li>
        </ul>
      </div>
    </div>


    <div class="row g-2">
      <div class="col-6 col-md-3">
        <form method="POST" action="{{ url_for('play') }}">
          <button type="submit" name="action" value="travel"
                  class="btn btn-primary w-100">Travel</button>
        </form>
      </div>
      <div class="col-6 col-md-3">
        <form method="POST" action="{{ url_for('play') }}">
          <button type="submit" name="action" value="hunt"
                  class="btn btn-success w-100">Hunt</button>
        </form>
      </div>
      <div class="col-6 col-md-3">
        <form method="POST" action="{{ url_for('play') }}">
          <button type="submit" name="action" value="rest"
                  class="btn btn-warning w-100">Rest</button>
        </form>
      </div>
      <div class="col-6 col-md-3">
        <form method="POST" action="{{ url_for('play') }}">
          <button type="submit" name="action" value="fort"
                  class="btn btn-secondary w-100"
                  {% if not game_state.fort_option_flag %}disabled{% endif %}>
            {% if game_state.fort_option_flag %}Visit Fort{% else %}Fort Unavailable{% endif %}
          </button>
        </form>
      </div>
    </div>
  </div>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
</body>
</html>
